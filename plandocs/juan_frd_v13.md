# 주안의소리 - FRD (Functional Requirements Document)

**Functional Requirements Document v1.1**  
**프로젝트명**: 주안의소리 (Voice of Juan)  
**문서 작성일**: 2025년 6월 29일  
**담당자**: [담당자명]  
**승인자**: [승인자명]  
**관련 문서**: PRD v1.0

---

## 1. 문서 개요

### 1.1 목적
본 문서는 주안의소리 시각장애인용 오디오북 앱의 기능적 요구사항을 상세히 정의합니다. 개발팀이 시스템을 구현할 때 필요한 모든 기능 명세를 포함합니다.

### 1.2 범위
- 모바일 애플리케이션 (Flutter)
- 웹 관리자 시스템 (React)
- Firebase 백엔드 서비스
- 사용자 인증 및 권한 관리
- 오디오 스트리밍 시스템
- 관리 도구 및 모니터링

### 1.3 문서 구조
각 기능 요구사항은 다음 형식으로 작성됩니다:
- **요구사항 ID**: FR-XXX 형식
- **우선순위**: 높음/중간/낮음
- **기능 설명**: 상세 기능 명세
- **입력 조건**: 사전 조건 및 입력값
- **출력 결과**: 예상 결과 및 후속 조건
- **예외 처리**: 오류 상황 및 처리 방법

---

## 2. 시스템 개요

### 2.1 시스템 구성
- **모바일 앱**: 최종 사용자용 오디오북 재생 앱
- **웹 어드민**: 관리자용 사용자 및 콘텐츠 관리 시스템
- **Firebase 백엔드**: 인증, 데이터베이스, 파일 스토리지
- **CDN**: 오디오 스트리밍 최적화

### 2.2 사용자 유형
- **교회 성도**: 성도번호로 자동 인증되는 사용자
- **외부 사용자**: 관리자 승인이 필요한 일반 사용자
- **관리자**: 웹 어드민을 통해 시스템을 관리하는 사용자

### 2.3 주요 기능 영역
1. 사용자 인증 및 권한 관리
2. 콘텐츠 관리 및 탐색
3. 오디오 스트리밍 및 재생
4. 북마크 및 이어듣기
5. 접근성 지원
6. 웹 어드민 관리 시스템

---

## 3. 기능 요구사항

### 3.1 사용자 인증 및 권한 관리

#### 3.1.1 구글 소셜 인증

**FR-001: 구글 계정 로그인**
- **우선순위**: 높음
- **기능 설명**: 사용자는 구글 계정을 통해 앱에 로그인할 수 있어야 함
- **입력 조건**: 
  - 유효한 구글 계정
  - 인터넷 연결 상태
- **출력 결과**: 
  - 로그인 성공 시 메인 화면으로 이동
  - 신규 사용자인 경우 추가 정보 입력 화면으로 이동
- **예외 처리**: 
  - 네트워크 오류 시 재시도 옵션 제공
  - 로그인 취소 시 로그인 화면 유지

**FR-002: 통합 인증 화면 표시**
- **우선순위**: 높음
- **기능 설명**: 구글 로그인 성공 후 성도/외부사용자 선택을 위한 통합 화면 표시
- **입력 조건**: 
  - 구글 인증 성공
  - 신규 사용자 또는 미승인 사용자
- **출력 결과**: 
  - 상단: 교회 성도번호 입력 섹션
  - 하단: 외부 사용자 승인 요청 섹션
  - 두 옵션 중 하나만 선택 가능
- **예외 처리**: 
  - 이미 승인된 사용자는 메인 화면으로 바로 이동
  - 네트워크 오류 시 오프라인 안내

#### 3.1.2 통합 인증 처리

**FR-003: 교회 성도번호 인증**
- **우선순위**: 높음
- **기능 설명**: 통합 화면 상단에서 성도번호 입력 및 즉시 인증
- **입력 조건**: 
  - 통합 인증 화면에서 성도번호 입력
  - 숫자 형식의 성도번호 (4-8자리)
  - "교회 성도입니다" 버튼 클릭
- **출력 결과**: 
  - 성도번호 DB 검증
  - 검증 성공 시 userType='member', isApproved=true 설정
  - 즉시 메인 화면으로 이동
  - 환영 메시지 표시
- **예외 처리**: 
  - 잘못된 성도번호: "등록되지 않은 성도번호입니다" 안내
  - 이미 등록된 성도번호: "이미 사용 중인 성도번호입니다" 안내
  - 형식 오류: "올바른 성도번호를 입력해주세요" 안내

**FR-004: 외부 사용자 승인 요청**
- **우선순위**: 높음
- **기능 설명**: 통합 화면 하단에서 외부 사용자 승인 요청 처리
- **입력 조건**: 
  - 통합 인증 화면에서 "외부 사용자입니다" 선택
  - 필수 정보 입력: 이름, 연락처, 이용 목적
  - "승인 요청" 버튼 클릭
- **출력 결과**: 
  - userType='external', isApproved=false 설정
  - 승인 요청 정보 Firestore에 저장
  - 관리자에게 새 승인 요청 알림 발송
  - 승인 대기 화면으로 이동
- **예외 처리**: 
  - 필수 정보 누락: "모든 정보를 입력해주세요" 안내
  - 이름 2자 미만: "올바른 이름을 입력해주세요"
  - 연락처 형식 오류: "올바른 연락처를 입력해주세요"
  - 이용 목적 10자 미만: "이용 목적을 자세히 입력해주세요"

**FR-005: 화면 라우팅 처리**
- **우선순위**: 높음
- **기능 설명**: 사용자 상태에 따른 적절한 화면 이동 처리
- **입력 조건**: 
  - 앱 실행 또는 인증 완료
  - 사용자 상태 확인 완료
- **출력 결과**: 
  - 미로그인 사용자: 로그인 화면
  - 로그인 후 미인증 사용자: 통합 인증 화면
  - 승인 대기 중: 승인 대기 화면
  - 승인 완료: 메인 홈 화면
  - 계정 정지: 정지 안내 화면
- **예외 처리**: 
  - 네트워크 오류 시 오프라인 모드 안내
  - 사용자 상태 불명 시 로그인 화면으로 이동

### 3.2 콘텐츠 관리 및 탐색

#### 3.2.1 도서 목록 조회

**FR-006: 도서 목록 표시**
- **우선순위**: 높음
- **기능 설명**: 승인된 사용자는 이용 가능한 도서 목록을 조회할 수 있음
- **입력 조건**: 
  - 승인된 사용자 로그인
  - 활성화된 도서만 조회
- **출력 결과**: 
  - 도서 제목, 저자, 표지 이미지 표시
  - 카테고리별 분류
  - 재생 시간 정보
- **예외 처리**: 
  - 도서 목록이 없는 경우 안내 메시지
  - 로딩 실패 시 재시도 옵션

**FR-007: 도서 검색**
- **우선순위**: 중간
- **기능 설명**: 제목, 저자명으로 도서를 검색할 수 있음
- **입력 조건**: 
  - 검색어 입력 (최소 2자 이상)
  - 도서 목록 로드 완료
- **출력 결과**: 
  - 검색어와 일치하는 도서 목록 표시
  - 검색 결과 수 표시
  - 검색어 하이라이트
- **예외 처리**: 
  - 검색 결과가 없는 경우 안내 메시지
  - 특수 문자 포함 시 필터링

**FR-008: 카테고리 필터링**
- **우선순위**: 중간
- **기능 설명**: 도서를 카테고리별로 필터링할 수 있음
- **입력 조건**: 
  - 카테고리 선택
  - 도서 목록 로드 완료
- **출력 결과**: 
  - 선택된 카테고리의 도서만 표시
  - 현재 선택된 카테고리 표시
- **예외 처리**: 
  - 해당 카테고리에 도서가 없는 경우 안내

#### 3.2.2 도서 상세 정보

**FR-009: 도서 상세 화면**
- **우선순위**: 높음
- **기능 설명**: 선택한 도서의 상세 정보를 확인할 수 있음
- **입력 조건**: 
  - 도서 목록에서 특정 도서 선택
  - 승인된 사용자
- **출력 결과**: 
  - 도서 개요 및 상세 설명
  - 총 재생 시간
  - 챕터 목록과 각 챕터별 재생 시간
  - 재생 시작 버튼
- **예외 처리**: 
  - 도서 정보 로드 실패 시 재시도 옵션
  - 비활성화된 도서인 경우 접근 불가 안내

**FR-010: 챕터 목록 관리**
- **우선순위**: 높음
- **기능 설명**: 도서의 챕터 목록을 표시하고 개별 챕터 재생 가능
- **입력 조건**: 
  - 도서 상세 화면 접근
  - 챕터 정보 로드 완료
- **출력 결과**: 
  - 챕터 번호, 제목, 재생 시간 표시
  - 개별 챕터 재생 버튼
  - 현재 재생 중인 챕터 표시
- **예외 처리**: 
  - 챕터 정보가 없는 경우 안내
  - 손상된 챕터 파일인 경우 스킵

### 3.3 오디오 스트리밍 및 재생

#### 3.3.1 실시간 스트리밍 시스템

**FR-011: 오디오 스트리밍**
- **우선순위**: 높음
- **기능 설명**: 오디오 파일을 실시간 스트리밍으로 재생
- **입력 조건**: 
  - 재생 버튼 클릭
  - 안정적인 인터넷 연결
  - 승인된 사용자 인증
- **출력 결과**: 
  - 오디오 스트리밍 시작
  - 재생 진행률 표시
  - 재생 컨트롤 활성화
- **예외 처리**: 
  - 네트워크 불안정 시 버퍼링 표시
  - 연결 끊김 시 자동 재연결 시도
  - DRM 인증 실패 시 오류 안내

**FR-012: 스트리밍 품질 조절**
- **우선순위**: 중간
- **기능 설명**: 네트워크 상태에 따라 스트리밍 품질 자동 조절
- **입력 조건**: 
  - 스트리밍 진행 중
  - 네트워크 상태 모니터링
- **출력 결과**: 
  - 네트워크 속도에 맞는 품질 자동 선택
  - 버퍼링 최소화
  - 품질 변경 시 사용자 알림
- **예외 처리**: 
  - 최저 품질에서도 재생 불가 시 오류 안내
  - Wi-Fi 연결 권장 메시지

**FR-013: DRM 보안 적용**
- **우선순위**: 높음
- **기능 설명**: 콘텐츠 무단 복제 방지를 위한 DRM 적용
- **입력 조건**: 
  - 인증된 사용자
  - 유효한 재생 세션
- **출력 결과**: 
  - 암호화된 스트리밍 제공
  - 무단 복제 방지
  - 세션 기반 접근 제어
- **예외 처리**: 
  - DRM 인증 실패 시 재로그인 요청
  - 비정상 접근 시도 차단

#### 3.3.2 오디오 재생 제어

**FR-014: 기본 재생 컨트롤**
- **우선순위**: 높음
- **기능 설명**: 오디오 재생에 필요한 기본 컨트롤 제공
- **입력 조건**: 
  - 스트리밍 시작 완료
  - 재생 화면 활성화
- **출력 결과**: 
  - 재생/일시정지/정지 버튼
  - 30초 앞으로/뒤로 이동
  - 진행률 표시 및 탐색 가능
- **예외 처리**: 
  - 스트리밍 오류 시 컨트롤 비활성화
  - 버퍼링 중 일시적 제어 제한

**FR-015: 재생 속도 조절**
- **우선순위**: 중간
- **기능 설명**: 0.5배속부터 2.0배속까지 재생 속도 조절
- **입력 조건**: 
  - 재생 중인 상태
  - 속도 조절 버튼 클릭
- **출력 결과**: 
  - 선택한 배속으로 재생 변경
  - 현재 배속 표시
  - 음질 왜곡 최소화
- **예외 처리**: 
  - 극한 배속에서 음질 저하 경고
  - 일부 기기에서 배속 제한

**FR-016: 백그라운드 재생**
- **우선순위**: 높음
- **기능 설명**: 앱이 백그라운드에 있을 때도 오디오 재생 지속
- **입력 조건**: 
  - 재생 중인 상태
  - 앱 백그라운드 전환
- **출력 결과**: 
  - 연속 재생 유지
  - 잠금 화면 컨트롤 제공
  - 알림창에 재생 정보 표시
- **예외 처리**: 
  - 메모리 부족 시 재생 중단 알림
  - 배터리 절약 모드에서 제한

**FR-017: 외부 컨트롤 지원**
- **우선순위**: 중간
- **기능 설명**: 이어폰/헤드셋 버튼으로 재생 제어
- **입력 조건**: 
  - 이어폰/헤드셋 연결
  - 재생 중인 상태
- **출력 결과**: 
  - 이어폰 버튼으로 재생/일시정지
  - 더블 클릭으로 다음 챕터 이동
  - 트리플 클릭으로 이전 챕터 이동
- **예외 처리**: 
  - 이어폰 연결 해제 시 자동 일시정지
  - 지원하지 않는 기기에서 기능 제한

### 3.4 북마크 및 이어듣기

#### 3.4.1 자동 북마크 시스템

**FR-018: 재생 위치 자동 저장**
- **우선순위**: 높음
- **기능 설명**: 재생 중인 위치를 자동으로 저장하여 이어듣기 지원
- **입력 조건**: 
  - 오디오 재생 중
  - 10초 이상 재생 진행
- **출력 결과**: 
  - 10초마다 현재 재생 위치 자동 저장
  - 앱 종료 시 마지막 위치 저장
  - Firestore에 북마크 정보 업데이트
- **예외 처리**: 
  - 네트워크 오류 시 로컬 저장 후 동기화
  - 저장 실패 시 재시도

**FR-019: 멀티 북마크 관리**
- **우선순위**: 중간
- **기능 설명**: 여러 도서의 북마크를 동시에 관리
- **입력 조건**: 
  - 사용자가 여러 도서 재생 이력 보유
  - 북마크 정보 존재
- **출력 결과**: 
  - 도서별 마지막 재생 위치 저장
  - 북마크 목록 표시
  - 개별 북마크 삭제 가능
- **예외 처리**: 
  - 북마크가 없는 도서는 처음부터 재생
  - 손상된 북마크 데이터 복구 시도

#### 3.4.2 이어듣기 기능

**FR-020: 이어듣기 버튼**
- **우선순위**: 높음
- **기능 설명**: 앱 실행 시 마지막 들었던 위치부터 재생할 수 있는 버튼 제공
- **입력 조건**: 
  - 북마크 정보 존재
  - 앱 홈 화면 진입
- **출력 결과**: 
  - 이어듣기 버튼 표시
  - 마지막 도서 제목과 진행률 표시
  - 클릭 시 해당 위치부터 재생 시작
- **예외 처리**: 
  - 북마크가 없는 경우 버튼 숨김
  - 해당 도서가 삭제된 경우 북마크 제거

**FR-021: 북마크 정확성 보장**
- **우선순위**: 높음
- **기능 설명**: 저장된 북마크 위치가 정확하게 복원되어야 함
- **입력 조건**: 
  - 저장된 북마크 정보
  - 이어듣기 실행
- **출력 결과**: 
  - 정확한 재생 위치로 이동
  - ±2초 이내 오차 허용
  - 챕터 경계 처리
- **예외 처리**: 
  - 북마크 위치가 파일 길이를 초과하는 경우 처음부터 재생
  - 챕터 구조 변경 시 가장 가까운 위치로 이동

### 3.5 접근성 지원

#### 3.5.1 시각장애인 UI 최적화

**FR-022: 큰 텍스트 및 버튼**
- **우선순위**: 높음
- **기능 설명**: 시각장애인이 쉽게 인식할 수 있는 UI 요소 제공
- **입력 조건**: 
  - 앱 화면 표시
  - 접근성 설정 적용
- **출력 결과**: 
  - 본문 텍스트 20sp 이상
  - 제목 텍스트 24-32sp
  - 버튼 크기 44x44dp 이상
  - 높은 대비 색상 적용
  - 입력 필드 테두리 명확히 표시
- **예외 처리**: 
  - 기기별 화면 크기에 따른 자동 조절
  - 사용자 설정에 따른 크기 변경

**FR-023: 통합 인증 화면 접근성**
- **우선순위**: 높음
- **기능 설명**: 통합 인증 화면에서 시각장애인을 위한 최적화된 UI 제공
- **입력 조건**: 
  - 통합 인증 화면 표시
  - 스크린 리더 활성화 여부 감지
- **출력 결과**: 
  - 섹션별 명확한 제목 읽기 ("교회 성도 인증 영역", "외부 사용자 승인 요청 영역")
  - 입력 필드별 명확한 라벨 ("성도번호", "이름", "연락처", "이용목적")
  - 버튼 상태 명확히 안내 ("성도 인증", "승인 요청")
  - 오류 메시지 즉시 읽기
- **예외 처리**: 
  - 두 섹션 동시 선택 방지
  - 필수 입력 필드 누락 시 해당 필드로 포커스 이동

**FR-024: 명확한 라벨링**
- **우선순위**: 높음
- **기능 설명**: 모든 UI 요소에 명확하고 이해하기 쉬운 라벨 제공
- **입력 조건**: 
  - 화면 요소 생성
  - 접근성 서비스 활성화
- **출력 결과**: 
  - 버튼, 입력 필드에 명확한 라벨
  - 상태 정보 음성 안내
  - 페이지 제목 명확히 표시
- **예외 처리**: 
  - 동적 콘텐츠 라벨 실시간 업데이트
  - 다국어 지원 시 라벨 번역

#### 3.5.2 스크린 리더 호환성

**FR-025: TalkBack/VoiceOver 지원**
- **우선순위**: 높음
- **기능 설명**: Android TalkBack 및 iOS VoiceOver와 완전 호환
- **입력 조건**: 
  - 스크린 리더 활성화
  - 앱 실행
- **출력 결과**: 
  - 화면 요소 순차적 탐색 지원
  - 의미 있는 콘텐츠 읽기
  - 제스처 기반 탐색 지원
- **예외 처리**: 
  - 스크린 리더 비활성화 시 시각적 안내 강화
  - 복잡한 UI에서 건너뛰기 링크 제공

**FR-026: 포커스 관리**
- **우선순위**: 중간
- **기능 설명**: 스크린 리더 사용 시 논리적인 포커스 순서 제공
- **입력 조건**: 
  - 스크린 리더로 화면 탐색
  - 화면 전환 또는 동적 콘텐츠 변경
- **출력 결과**: 
  - 중요한 요소부터 순서대로 포커스
  - 모달 창 열림 시 포커스 이동
  - 페이지 변경 시 적절한 위치로 포커스
- **예외 처리**: 
  - 포커스 무한 루프 방지
  - 숨겨진 요소 포커스 제외

### 3.6 웹 어드민 시스템

#### 3.6.1 사용자 관리

**FR-027: 외부 사용자 승인 관리**
- **우선순위**: 높음
- **기능 설명**: 웹 어드민에서 외부 사용자 승인 요청을 처리
- **입력 조건**: 
  - 관리자 계정으로 로그인
  - 승인 대기 중인 사용자 존재
- **출력 결과**: 
  - 승인 대기 목록 표시
  - 사용자 정보 및 요청 사유 확인
  - 승인/거부 버튼 제공
  - 처리 결과 실시간 반영
- **예외 처리**: 
  - 중복 처리 방지
  - 처리 결과 사용자에게 알림 발송

**FR-027: 사용자 IP 추적**
- **우선순위**: 중간
- **기능 설명**: 사용자별 접속 IP 주소 및 위치 정보 추적
- **입력 조건**: 
  - 사용자 로그인 이벤트
  - IP 주소 정보 수집
- **출력 결과**: 
  - 사용자별 IP 이력 저장
  - 접속 위치 정보 표시
  - 이상 접속 패턴 감지
- **예외 처리**: 
  - VPN 사용 시 실제 위치 불명 표시
  - 개인정보 보호 정책 준수

**FR-028: 사용자 계정 관리**
- **우선순위**: 높음
- **기능 설명**: 관리자가 사용자 계정을 일시정지하거나 해제
- **입력 조건**: 
  - 관리자 권한
  - 대상 사용자 선택
- **출력 결과**: 
  - 계정 일시정지 처리
  - 해당 사용자 즉시 로그아웃
  - 정지 사유 기록
- **예외 처리**: 
  - 관리자 계정은 정지 불가
  - 정지 해제 시 사용자에게 알림

#### 3.6.2 콘텐츠 관리

**FR-029: 도서 업로드 관리**
- **우선순위**: 높음
- **기능 설명**: 웹 어드민에서 새로운 도서 및 오디오 파일 업로드
- **입력 조건**: 
  - 관리자 계정
  - 도서 메타데이터 (제목, 저자, 설명 등)
  - 오디오 파일 (지원 형식: MP3, AAC)
- **출력 결과**: 
  - Firebase Storage에 오디오 파일 업로드
  - Firestore에 도서 정보 저장
  - CDN을 통한 스트리밍 URL 생성
- **예외 처리**: 
  - 대용량 파일 업로드 진행률 표시
  - 업로드 실패 시 재시도 옵션
  - 중복 도서 검증

**FR-030: 콘텐츠 활성화 관리**
- **우선순위**: 중간
- **기능 설명**: 업로드된 도서의 활성화/비활성화 관리
- **입력 조건**: 
  - 관리자 권한
  - 업로드된 도서 목록
- **출력 결과**: 
  - 도서별 활성화 상태 토글
  - 비활성화된 도서는 모바일 앱에서 숨김 처리
  - 변경 사항 즉시 반영
- **예외 처리**: 
  - 재생 중인 도서 비활성화 시 경고
  - 활성화 조건 검증 (메타데이터 완성도)

#### 3.6.3 통계 및 모니터링

**FR-031: 실시간 사용자 모니터링**
- **우선순위**: 중간
- **기능 설명**: 현재 접속 중인 사용자 실시간 모니터링
- **입력 조건**: 
  - 웹 어드민 대시보드 접근
  - 실시간 데이터 연결
- **출력 결과**: 
  - 현재 접속자 수 표시
  - 접속자별 IP, 위치, 재생 중인 콘텐츠
  - 세션 시간 정보
- **예외 처리**: 
  - 연결 끊김 시 마지막 업데이트 시간 표시
  - 과부하 방지를 위한 업데이트 주기 조절

**FR-032: 재생 통계 수집**
- **우선순위**: 높음
- **기능 설명**: 도서별, 사용자별 재생 통계 수집 및 분석
- **입력 조건**: 
  - 사용자 재생 이벤트 발생
  - 통계 수집 활성화
- **출력 결과**: 
  - 도서별 총 재생 횟수
  - 사용자별 청취 시간
  - 인기 콘텐츠 순위
  - 완주율 통계
- **예외 처리**: 
  - 짧은 재생(30초 미만)은 통계에서 제외
  - 중복 재생 필터링

**FR-033: 종합 대시보드**
- **우선순위**: 중간
- **기능 설명**: 서비스 전체 지표를 한눈에 볼 수 있는 대시보드
- **입력 조건**: 
  - 관리자 로그인
  - 충분한 통계 데이터 누적
- **출력 결과**: 
  - 일/주/월별 사용자 증가 추이
  - 콘텐츠 소비 패턴 분석
  - 서버 상태 및 성능 지표
  - 주요 KPI 요약
- **예외 처리**: 
  - 데이터 부족 시 안내 메시지
  - 차트 렌더링 오류 시 대체 표시

---

## 4. 데이터 처리 요구사항

### 4.1 입력 데이터 검증

**FR-034: 사용자 입력 검증**
- **우선순위**: 높음
- **기능 설명**: 모든 사용자 입력에 대한 유효성 검증
- **입력 조건**: 사용자 데이터 입력
- **출력 결과**: 유효한 데이터만 처리, 오류 시 명확한 안내
- **예외 처리**: SQL 인젝션, XSS 공격 방지

**FR-035: 파일 형식 검증**
- **우선순위**: 높음
- **기능 설명**: 업로드되는 오디오 파일 형식 및 무결성 검증
- **입력 조건**: 오디오 파일 업로드
- **출력 결과**: 지원 형식만 허용, 손상된 파일 거부
- **예외 처리**: 지원하지 않는 형식 업로드 시 안내

### 4.2 데이터 동기화

**FR-036: 실시간 데이터 동기화**
- **우선순위**: 높음
- **기능 설명**: 모바일 앱과 웹 어드민 간 실시간 데이터 동기화
- **입력 조건**: 데이터 변경 이벤트 발생
- **출력 결과**: 모든 클라이언트에 변경 사항 즉시 반영
- **예외 처리**: 네트워크 단절 시 재연결 후 동기화

**FR-037: 오프라인 대응**
- **우선순위**: 중간
- **기능 설명**: 네트워크 연결이 불안정할 때 기본 기능 유지
- **입력 조건**: 네트워크 연결 불안정 상황
- **출력 결과**: 캐시된 데이터로 제한적 기능 제공
- **예외 처리**: 온라인 복구 시 자동 동기화

---

## 5. 성능 요구사항

### 5.1 응답 시간

**FR-038: 화면 로딩 시간**
- **우선순위**: 높음
- **기능 설명**: 모든 화면의 초기 로딩 시간 최적화
- **성능 기준**: 
  - 앱 실행: 3초 이내
  - 화면 전환: 300ms 이내
  - 도서 목록 로딩: 2초 이내
- **예외 처리**: 시간 초과 시 로딩 실패 안내

**FR-039: 스트리밍 시작 시간**
- **우선순위**: 높음
- **기능 설명**: 재생 버튼 클릭 후 오디오 출력까지의 시간 최소화
- **성능 기준**: 
  - 스트리밍 시작: 5초 이내
  - 버퍼링 시간: 10초 이내
  - 챕터 전환: 2초 이내
- **예외 처리**: 네트워크 속도에 따른 동적 조절

### 5.2 동시 사용자 처리

**FR-040: 동시 접속 지원**
- **우선순위**: 중간
- **기능 설명**: 여러 사용자의 동시 스트리밍 지원
- **성능 기준**: 
  - 동시 접속자: 최대 1,000명
  - 서버 응답 시간 유지: 2초 이내
  - CDN 활용으로 트래픽 분산
- **예외 처리**: 용량 초과 시 대기열 시스템

---

## 6. 보안 요구사항

### 6.1 인증 보안

**FR-041: 세션 관리**
- **우선순위**: 높음
- **기능 설명**: 안전한 사용자 세션 관리
- **보안 기준**: 
  - JWT 토큰 기반 인증
  - 토큰 만료 시간: 24시간
  - 자동 갱신 지원
- **예외 처리**: 비정상 세션 강제 종료

**FR-042: 비밀번호 보안**
- **우선순위**: 높음
- **기능 설명**: 구글 OAuth를 통한 안전한 인증
- **보안 기준**: 
  - OAuth 2.0 표준 준수
  - HTTPS 통신 강제
  - 토큰 암호화 저장
- **예외 처리**: 인증 실패 시 재시도 제한

### 6.2 데이터 보안

**FR-043: 개인정보 보호**
- **우선순위**: 높음
- **기능 설명**: 사용자 개인정보 안전한 처리
- **보안 기준**: 
  - 최소한의 정보만 수집
  - 암호화 저장
  - 접근 로그 기록
- **예외 처리**: 데이터 유출 시 즉시 알림

**FR-044: 콘텐츠 보안**
- **우선순위**: 높음
- **기능 설명**: 오디오 콘텐츠 무단 복제 방지
- **보안 기준**: 
  - DRM 적용
  - 스트리밍 전용 제공
  - 세션 기반 접근 제어
- **예외 처리**: 무단 접근 시도 차단 및 로그

---

## 7. 예외 처리 및 오류 관리

### 7.1 네트워크 오류

**FR-045: 연결 실패 처리**
- **우선순위**: 높음
- **기능 설명**: 네트워크 연결 실패 시 적절한 안내 및 복구
- **처리 방법**: 
  - 연결 상태 실시간 모니터링
  - 자동 재연결 시도 (최대 3회)
  - 사용자 친화적 오류 메시지
- **복구 방안**: 수동 재시도 버튼 제공

**FR-046: 스트리밍 중단 처리**
- **우선순위**: 높음
- **기능 설명**: 재생 중 네트워크 문제로 중단 시 복구
- **처리 방법**: 
  - 중단 지점 자동 저장
  - 연결 복구 시 이어서 재생
  - 버퍼링 상태 표시
- **복구 방안**: 다른 네트워크로 전환 안내

### 7.2 시스템 오류

**FR-047: 앱 크래시 방지**
- **우선순위**: 높음
- **기능 설명**: 예상치 못한 오류로 인한 앱 종료 방지
- **처리 방법**: 
  - Try-catch 블록으로 오류 캐치
  - 크래시 로그 자동 수집
  - 안전한 기본값으로 복구
- **복구 방안**: 앱 재시작 유도

**FR-048: 데이터 무결성 보장**
- **우선순위**: 중간
- **기능 설명**: 데이터 손상 시 복구 및 일관성 유지
- **처리 방법**: 
  - 정기적 데이터 검증
  - 손상된 데이터 감지 및 복구
  - 백업 데이터 활용
- **복구 방안**: 수동 데이터 복구 도구

---

## 8. 테스트 요구사항

### 8.1 기능 테스트

**FR-049: 단위 테스트**
- **우선순위**: 높음
- **테스트 범위**: 모든 핵심 기능별 단위 테스트
- **커버리지 목표**: 80% 이상
- **자동화**: CI/CD 파이프라인 통합

**FR-050: 통합 테스트**
- **우선순위**: 높음
- **테스트 범위**: 모바일 앱과 백엔드 통합 테스트
- **테스트 항목**: API 통신, 데이터 동기화, 인증 플로우

### 8.2 사용성 테스트

**FR-051: 접근성 테스트**
- **우선순위**: 높음
- **테스트 범위**: 시각장애인 사용자 대상 실제 테스트
- **테스트 도구**: TalkBack, VoiceOver 호환성
- **참여자**: 실제 시각장애인 사용자 10명 이상

**FR-052: 성능 테스트**
- **우선순위**: 중간
- **테스트 범위**: 부하 테스트, 스트레스 테스트
- **목표 지표**: 동시 접속자 1,000명, 응답시간 2초 이내

---

## 9. 배포 및 운영 요구사항

### 9.1 배포 자동화

**FR-053: CI/CD 파이프라인**
- **우선순위**: 중간
- **기능 설명**: 코드 푸시부터 배포까지 자동화
- **구성 요소**: 
  - 자동 테스트 실행
  - 빌드 및 패키징
  - 스테이징 환경 배포
  - 프로덕션 배포 승인

### 9.2 모니터링

**FR-054: 실시간 모니터링**
- **우선순위**: 높음
- **모니터링 항목**: 
  - 서버 상태 및 성능
  - 사용자 활동 로그
  - 오류 발생 현황
  - 보안 이벤트

**FR-055: 알림 시스템**
- **우선순위**: 중간
- **알림 조건**: 
  - 서버 다운 시 즉시 알림
  - 높은 오류율 감지 시 알림
  - 보안 위협 감지 시 알림

---

## 10. 문서 관리

### 10.1 버전 관리
- **문서 버전**: v1.1
- **마지막 업데이트**: 2025년 6월 29일
- **다음 리뷰 예정**: 2025년 7월 29일

### 10.2 승인 이력
| 날짜 | 버전 | 승인자 | 변경 사항 |
|------|------|--------|-----------|
| 2025-06-29 | v1.0 | [승인자명] | 초기 문서 작성 |
| 2025-06-29 | v1.1 | [승인자명] | 통합 인증 화면 추가 (FR-002~004 수정) |

### 10.3 관련 문서
- PRD v1.0 (Product Requirements Document)
- 시스템 아키텍처 문서
- API 명세서
- 테스트 계획서
- UI/UX 접근성 가이드라인

**문서 끝**

**Document Version**: v1.1  
**Last Updated**: 2025년 6월 29일  
**Changes**: 통합 인증 화면 추가 및 관련 요구사항 수정